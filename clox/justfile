alias b := build

build:
	zig cc -Wall -Wextra main.c lib/*.c -o lox

build-release:
	zig cc -O3 -Wall -Wextra main.c lib/*.c -o lox

build-debug:
	gcc -g -Wall -Wextra main.c lib/*.c -o lox

debug-repl: build-debug
	gdb --args ./lox repl.lox

run-repl: build
	./lox repl.lox

run: build
	./lox

run-file FILE: build
	./lox {{FILE}}


test-build:
	zig cc -Wall -Wextra test.c lib/*.c -o test

test: test-build
	set -o pipefail && ./test -v | ./greenest

test-nocolor: test-build
	./test -v


clean:
	rm -rf *.gch
	rm -f lox test

clean-build: clean
	just build
