alias b := build

build:
	zig cc -O3 -Wall -Wextra main.c lib/*.c -o lox


run: build
	./lox

run-file FILE: build
	./lox {{FILE}}


test-build:
	zig cc -Wall -Wextra test.c lib/*.c -o test

test: test-build
	set -o pipefail && ./test -v | ./greenest

test-nocolor: test-build
	./test -v


clean:
	rm -rf *.gch
	rm -f lox test

clean-build: clean
	just build
